<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Patrimonio e Reddito - Lezione Interattiva</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.95;
        }

        .timer {
            background: rgba(255,255,255,0.2);
            padding: 15px;
            border-radius: 10px;
            margin-top: 20px;
            font-size: 1.5em;
            font-weight: bold;
        }

        .navigation {
            display: flex;
            justify-content: center;
            gap: 10px;
            padding: 20px;
            background: #f8f9fa;
            flex-wrap: wrap;
        }

        .nav-btn {
            padding: 12px 24px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1em;
            transition: all 0.3s;
            font-weight: 600;
        }

        .nav-btn:hover {
            background: #764ba2;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }

        .nav-btn.active {
            background: #f5576c;
        }

        .content {
            padding: 40px;
            min-height: 500px;
        }

        .module {
            display: none;
        }

        .module.active {
            display: block;
            animation: fadeIn 0.5s;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .module h2 {
            color: #667eea;
            font-size: 2em;
            margin-bottom: 20px;
            border-bottom: 3px solid #f5576c;
            padding-bottom: 10px;
        }

        .module h3 {
            color: #764ba2;
            font-size: 1.5em;
            margin: 30px 0 15px 0;
        }

        .esempio-box {
            background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
            padding: 25px;
            border-radius: 15px;
            margin: 20px 0;
            border-left: 5px solid #f5576c;
        }

        .esempio-box h4 {
            color: #d63031;
            margin-bottom: 15px;
            font-size: 1.3em;
        }

        .tabella-patrimoniale {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        .tabella-patrimoniale th {
            background: #667eea;
            color: white;
            padding: 15px;
            text-align: left;
            font-size: 1.1em;
        }

        .tabella-patrimoniale td {
            padding: 12px 15px;
            border-bottom: 1px solid #ddd;
        }

        .tabella-patrimoniale tr:nth-child(even) {
            background: #f8f9fa;
        }

        .attivita {
            background: #e3f2fd;
        }

        .passivita {
            background: #fff3e0;
        }

        .totale {
            background: #c5e1a5 !important;
            font-weight: bold;
            font-size: 1.1em;
        }

        .quiz-container {
            background: #f8f9fa;
            padding: 30px;
            border-radius: 15px;
            margin: 30px 0;
        }

        .quiz-question {
            font-size: 1.3em;
            color: #2d3436;
            margin-bottom: 20px;
            font-weight: 600;
        }

        .quiz-option {
            display: block;
            padding: 15px;
            margin: 10px 0;
            background: white;
            border: 2px solid #dfe6e9;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 1.1em;
        }

        .quiz-option:hover {
            border-color: #667eea;
            transform: translateX(5px);
        }

        .quiz-option.correct {
            background: #00b894;
            color: white;
            border-color: #00b894;
        }

        .quiz-option.wrong {
            background: #ff7675;
            color: white;
            border-color: #ff7675;
        }

        .feedback {
            margin-top: 15px;
            padding: 15px;
            border-radius: 10px;
            display: none;
        }

        .feedback.show {
            display: block;
        }

        .feedback.correct {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .feedback.wrong {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        .interactive-exercise {
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            padding: 30px;
            border-radius: 15px;
            margin: 30px 0;
        }

        .draggable {
            background: white;
            padding: 15px;
            margin: 10px;
            border-radius: 8px;
            cursor: move;
            display: inline-block;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            transition: all 0.3s;
        }

        .draggable:hover {
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
            transform: scale(1.05);
        }

        .drop-zone {
            min-height: 100px;
            border: 3px dashed #667eea;
            border-radius: 10px;
            padding: 20px;
            margin: 15px 0;
            background: white;
        }

        .drop-zone.drag-over {
            background: #e3f2fd;
            border-color: #f5576c;
        }

        .formula-box {
            background: #fff3cd;
            border: 3px solid #ffc107;
            padding: 25px;
            margin: 25px 0;
            border-radius: 15px;
            text-align: center;
            font-size: 1.4em;
            font-weight: bold;
            color: #856404;
        }

        .highlight {
            background: #ffeb3b;
            padding: 2px 6px;
            border-radius: 3px;
            font-weight: bold;
        }

        .icon {
            font-size: 2em;
            margin-right: 10px;
        }

        .progress-bar {
            width: 100%;
            height: 30px;
            background: #e0e0e0;
            border-radius: 15px;
            overflow: hidden;
            margin: 20px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            transition: width 0.5s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }

        .btn-primary {
            background: #667eea;
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1.1em;
            font-weight: 600;
            transition: all 0.3s;
            margin: 10px 5px;
        }

        .btn-primary:hover {
            background: #764ba2;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }

        .btn-success {
            background: #00b894;
        }

        .btn-success:hover {
            background: #00a383;
        }

        .summary-box {
            background: linear-gradient(135deg, #e0c3fc 0%, #8ec5fc 100%);
            padding: 30px;
            border-radius: 15px;
            margin: 30px 0;
        }

        .summary-box h3 {
            color: #2d3436;
            margin-bottom: 20px;
        }

        .summary-box ul {
            list-style: none;
            padding-left: 0;
        }

        .summary-box li {
            padding: 10px;
            margin: 8px 0;
            background: rgba(255,255,255,0.7);
            border-radius: 8px;
            padding-left: 20px;
        }

        .summary-box li:before {
            content: "‚úì";
            color: #00b894;
            font-weight: bold;
            margin-right: 10px;
        }

        input[type="number"] {
            padding: 10px;
            border: 2px solid #dfe6e9;
            border-radius: 8px;
            font-size: 1.1em;
            width: 150px;
            margin: 5px;
        }

        .calcolo-container {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin: 15px 0;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 1.8em;
            }
            
            .content {
                padding: 20px;
            }
            
            .navigation {
                flex-direction: column;
            }
            
            .nav-btn {
                width: 100%;
            }
        }

        .note-box {
            background: #e8f5e9;
            border-left: 5px solid #4caf50;
            padding: 20px;
            margin: 20px 0;
            border-radius: 5px;
        }

        .warning-box {
            background: #fff3e0;
            border-left: 5px solid #ff9800;
            padding: 20px;
            margin: 20px 0;
            border-radius: 5px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üçΩÔ∏è Patrimonio e Reddito</h1>
            <p>Lezione Interattiva per il Settore Enogastronomico</p>
            <div class="timer" id="timer">‚è±Ô∏è Tempo: 0:00</div>
        </div>

        <div class="navigation">
            <button class="nav-btn active" onclick="showModule(0)">1Ô∏è‚É£ Introduzione</button>
            <button class="nav-btn" onclick="showModule(1)">2Ô∏è‚É£ Il Patrimonio</button>
            <button class="nav-btn" onclick="showModule(2)">3Ô∏è‚É£ Attivit√† e Passivit√†</button>
            <button class="nav-btn" onclick="showModule(3)">4Ô∏è‚É£ Il Reddito</button>
            <button class="nav-btn" onclick="showModule(4)">5Ô∏è‚É£ Costi e Ricavi</button>
            <button class="nav-btn" onclick="showModule(5)">6Ô∏è‚É£ Esercizio Pratico</button>
            <button class="nav-btn" onclick="showModule(6)">7Ô∏è‚É£ Riepilogo</button>
        </div>

        <div class="progress-bar">
            <div class="progress-fill" id="progress">0%</div>
        </div>

        <div class="content">
            <!-- MODULO 0: INTRODUZIONE -->
            <div class="module active" id="module0">
                <h2>üéØ Benvenuti alla Lezione su Patrimonio e Reddito</h2>
                
                <div class="esempio-box">
                    <h4>üí° Scenario: Il Ristorante "Da Mario"</h4>
                    <p>Oggi accompagneremo Mario nella gestione del suo ristorante. Mario ha aperto il suo locale 3 mesi fa e vuole capire:</p>
                    <ul style="margin-left: 30px; margin-top: 15px;">
                        <li>‚úÖ <strong>Cosa possiede</strong> (il suo patrimonio)</li>
                        <li>‚úÖ <strong>Cosa deve</strong> (i suoi debiti)</li>
                        <li>‚úÖ <strong>Se sta guadagnando o perdendo</strong> (il reddito)</li>
                    </ul>
                </div>

                <h3>üìã Piano della Lezione (120 minuti)</h3>
                <div style="background: #f8f9fa; padding: 20px; border-radius: 10px; margin: 20px 0;">
                    <p><strong>Prima Ora (60 min):</strong></p>
                    <ul style="margin-left: 30px; margin-top: 10px;">
                        <li>15 min - Introduzione e concetti base</li>
                        <li>20 min - Il Patrimonio: Attivit√† e Passivit√†</li>
                        <li>15 min - Esercizi interattivi sul Patrimonio</li>
                        <li>10 min - Quiz di verifica</li>
                    </ul>
                    
                    <p style="margin-top: 20px;"><strong>Seconda Ora (60 min):</strong></p>
                    <ul style="margin-left: 30px; margin-top: 10px;">
                        <li>20 min - Il Reddito: Costi e Ricavi</li>
                        <li>25 min - Esercizio pratico completo</li>
                        <li>15 min - Riepilogo e verifica finale</li>
                    </ul>
                </div>

                <div class="note-box">
                    <h4>üìö Obiettivi di Apprendimento</h4>
                    <p>Alla fine di questa lezione saprai:</p>
                    <ul style="margin-left: 30px; margin-top: 10px;">
                        <li>Distinguere attivit√† e passivit√†</li>
                        <li>Costruire una situazione patrimoniale</li>
                        <li>Calcolare il patrimonio netto</li>
                        <li>Riconoscere costi e ricavi</li>
                        <li>Determinare utile o perdita d'esercizio</li>
                    </ul>
                </div>

                <button class="btn-primary" onclick="showModule(1)">Iniziamo! ‚ñ∂Ô∏è</button>
            </div>

            <!-- MODULO 1: IL PATRIMONIO -->
            <div class="module" id="module1">
                <h2>üí∞ Il Patrimonio dell'Impresa</h2>

                <h3>Cos'√® il Patrimonio?</h3>
                <p style="font-size: 1.2em; line-height: 1.8;">
                    Il <span class="highlight">patrimonio</span> √® l'insieme di tutti i beni economici che l'impresa possiede 
                    in un determinato momento, considerando anche i debiti verso terzi.
                </p>

                <div class="esempio-box">
                    <h4>üçï Esempio: Il Patrimonio di Mario</h4>
                    <p><strong>Mario possiede:</strong></p>
                    <ul style="margin-left: 30px; margin-top: 10px;">
                        <li>üè† Un locale commerciale</li>
                        <li>üç¥ Attrezzature da cucina (fornelli, frigoriferi, ecc.)</li>
                        <li>ü™ë Tavoli e sedie</li>
                        <li>üí∞ Denaro in cassa</li>
                        <li>üè¶ Soldi sul conto corrente</li>
                        <li>üì¶ Scorte di cibo e bevande</li>
                    </ul>
                    
                    <p style="margin-top: 20px;"><strong>Ma Mario deve anche:</strong></p>
                    <ul style="margin-left: 30px; margin-top: 10px;">
                        <li>üí≥ Pagare i fornitori di cibo</li>
                        <li>üè¶ Restituire un prestito bancario</li>
                        <li>üìÑ Pagare le bollette</li>
                    </ul>
                </div>

                <div class="formula-box">
                    üìê PATRIMONIO = Ci√≤ che POSSIEDO - Ci√≤ che DEVO
                </div>

                <h3>La Situazione Patrimoniale</h3>
                <p style="font-size: 1.1em; line-height: 1.8; margin: 20px 0;">
                    La situazione patrimoniale √® un documento che si divide in <strong>due sezioni</strong>:
                </p>

                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 30px 0;">
                    <div style="background: #e3f2fd; padding: 25px; border-radius: 15px;">
                        <h4 style="color: #1976d2; font-size: 1.5em;">üëà ATTIVIT√Ä</h4>
                        <p style="margin: 15px 0;">Tutto ci√≤ che l'impresa <strong>possiede</strong></p>
                        <ul style="margin-left: 20px;">
                            <li>Immobili</li>
                            <li>Attrezzature</li>
                            <li>Merci</li>
                            <li>Denaro</li>
                            <li>Crediti dai clienti</li>
                        </ul>
                    </div>

                    <div style="background: #fff3e0; padding: 25px; border-radius: 15px;">
                        <h4 style="color: #f57c00; font-size: 1.5em;">üëâ PASSIVIT√Ä</h4>
                        <p style="margin: 15px 0;">Tutto ci√≤ che l'impresa <strong>deve</strong></p>
                        <ul style="margin-left: 20px;">
                            <li>Debiti verso fornitori</li>
                            <li>Prestiti bancari</li>
                            <li>Debiti tributari</li>
                            <li><strong>+ Patrimonio Netto</strong></li>
                        </ul>
                    </div>
                </div>

                <div class="note-box">
                    <h4>‚öñÔ∏è Regola Fondamentale</h4>
                    <p style="font-size: 1.2em; font-weight: bold; margin-top: 10px;">
                        ATTIVIT√Ä = PASSIVIT√Ä + PATRIMONIO NETTO
                    </p>
                    <p style="margin-top: 15px;">
                        Questo significa che il totale di ci√≤ che possiedo deve sempre essere uguale alla somma 
                        di ci√≤ che devo pi√π il mio capitale netto!
                    </p>
                </div>

                <button class="btn-primary" onclick="showModule(2)">Avanti: Attivit√† e Passivit√† ‚ñ∂Ô∏è</button>
            </div>

            <!-- MODULO 2: ATTIVIT√Ä E PASSIVIT√Ä -->
            <div class="module" id="module2">
                <h2>üîç Attivit√† e Passivit√† nel Dettaglio</h2>

                <h3>üìä Le ATTIVIT√Ä</h3>
                
                <div style="margin: 30px 0;">
                    <h4 style="color: #1976d2; font-size: 1.3em;">1Ô∏è‚É£ Attivo Immobilizzato</h4>
                    <p style="font-size: 1.1em; margin: 15px 0;">
                        Beni destinati a <strong>rimanere</strong> nel patrimonio aziendale per tempi medio/lunghi (pi√π di un anno).
                    </p>
                    
                    <div class="esempio-box">
                        <h4>üçΩÔ∏è Esempi nel Ristorante</h4>
                        <ul style="margin-left: 30px;">
                            <li>üè¢ <strong>Fabbricati:</strong> Il locale del ristorante</li>
                            <li>üî™ <strong>Macchinari:</strong> Forni professionali, frigoriferi industriali, lavastoviglie</li>
                            <li>üöó <strong>Automezzi:</strong> Furgone per le consegne a domicilio</li>
                            <li>üíª <strong>Attrezzature:</strong> Sistema cassa, computer, POS</li>
                        </ul>
                    </div>
                </div>

                <div style="margin: 30px 0;">
                    <h4 style="color: #1976d2; font-size: 1.3em;">2Ô∏è‚É£ Attivo Circolante</h4>
                    <p style="font-size: 1.1em; margin: 15px 0;">
                        Beni destinati a <strong>circolare</strong> nel patrimonio aziendale per periodi brevi (meno di un anno).
                    </p>
                    
                    <div class="esempio-box">
                        <h4>üçΩÔ∏è Esempi nel Ristorante</h4>
                        <ul style="margin-left: 30px;">
                            <li>üì¶ <strong>Rimanenze:</strong> Scorte di pasta, carne, verdure, vino</li>
                            <li>üí∞ <strong>Denaro in cassa:</strong> Contanti incassati oggi</li>
                            <li>üè¶ <strong>Banca c/c:</strong> Soldi sul conto corrente</li>
                            <li>üìÑ <strong>Crediti v/clienti:</strong> Fatture non ancora pagate (es: banchetti aziendali)</li>
                        </ul>
                    </div>
                </div>

                <h3 style="margin-top: 50px;">üìä Le PASSIVIT√Ä</h3>

                <div style="margin: 30px 0;">
                    <h4 style="color: #f57c00; font-size: 1.3em;">1Ô∏è‚É£ Debiti a Breve Termine</h4>
                    <p style="font-size: 1.1em; margin: 15px 0;">
                        Debiti con scadenza <strong>inferiore all'anno</strong>.
                    </p>
                    
                    <div class="esempio-box">
                        <h4>üçΩÔ∏è Esempi nel Ristorante</h4>
                        <ul style="margin-left: 30px;">
                            <li>ü•© <strong>Debiti v/fornitori:</strong> Fatture da pagare al macellaio, al fornitore di verdure</li>
                            <li>üì± <strong>Debiti tributari:</strong> IVA da versare, tasse da pagare</li>
                            <li>üí° <strong>Bollette:</strong> Luce, gas, acqua da pagare</li>
                        </ul>
                    </div>
                </div>

                <div style="margin: 30px 0;">
                    <h4 style="color: #f57c00; font-size: 1.3em;">2Ô∏è‚É£ Debiti a Medio/Lungo Termine</h4>
                    <p style="font-size: 1.1em; margin: 15px 0;">
                        Debiti con scadenza <strong>superiore all'anno</strong>.
                    </p>
                    
                    <div class="esempio-box">
                        <h4>üçΩÔ∏è Esempi nel Ristorante</h4>
                        <ul style="margin-left: 30px;">
                            <li>üè¶ <strong>Mutui passivi:</strong> Prestito bancario per acquistare il locale</li>
                            <li>üìä <strong>Fondi ammortamento:</strong> Accantonamenti per rinnovare le attrezzature</li>
                        </ul>
                    </div>
                </div>

                <div style="margin: 30px 0;">
                    <h4 style="color: #4caf50; font-size: 1.3em;">3Ô∏è‚É£ Patrimonio Netto</h4>
                    <p style="font-size: 1.1em; margin: 15px 0;">
                        La <strong>ricchezza effettiva</strong> dell'imprenditore, costituita da:
                    </p>
                    
                    <div class="esempio-box">
                        <ul style="margin-left: 30px;">
                            <li>üíµ <strong>Capitale sociale:</strong> Soldi iniziali investiti da Mario</li>
                            <li>üìà <strong>Riserve:</strong> Utili degli anni precedenti non distribuiti</li>
                            <li>‚úÖ <strong>Utile d'esercizio:</strong> Guadagno dell'anno in corso</li>
                        </ul>
                    </div>
                </div>

                <div class="quiz-container">
                    <h3>üéØ Quiz Rapido!</h3>
                    <div class="quiz-question">
                        Il forno professionale del ristorante √®:
                    </div>
                    <div class="quiz-option" onclick="checkAnswer(this, false)">
                        A) Attivo circolante
                    </div>
                    <div class="quiz-option" onclick="checkAnswer(this, true)">
                        B) Attivo immobilizzato
                    </div>
                    <div class="quiz-option" onclick="checkAnswer(this, false)">
                        C) Passivit√†
                    </div>
                    <div class="feedback" id="feedback1"></div>
                </div>

                <button class="btn-primary" onclick="showModule(3)">Avanti: Il Reddito ‚ñ∂Ô∏è</button>
            </div>

            <!-- MODULO 3: IL REDDITO -->
            <div class="module" id="module3">
                <h2>üìà Il Reddito d'Esercizio</h2>

                <h3>Cos'√® il Reddito?</h3>
                <p style="font-size: 1.2em; line-height: 1.8; margin: 20px 0;">
                    Il <span class="highlight">reddito d'esercizio</span> √® il risultato economico della gestione 
                    di un'impresa durante un periodo amministrativo (di solito un anno).
                </p>

                <div class="formula-box">
                    üí∞ REDDITO = RICAVI - COSTI
                </div>

                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin: 40px 0;">
                    <div style="background: linear-gradient(135deg, #d4fc79 0%, #96e6a1 100%); padding: 30px; border-radius: 15px;">
                        <h4 style="font-size: 1.8em; text-align: center;">üòä UTILE</h4>
                        <p style="text-align: center; font-size: 1.3em; margin: 20px 0;">
                            Quando i <strong>RICAVI</strong> sono <strong>maggiori</strong> dei <strong>COSTI</strong>
                        </p>
                        <div class="formula-box" style="background: #c8e6c9; border-color: #4caf50;">
                            RICAVI > COSTI<br>
                            RICAVI - COSTI = UTILE
                        </div>
                    </div>

                    <div style="background: linear-gradient(135deg, #ffeaa7 0%, #fdcb6e 100%); padding: 30px; border-radius: 15px;">
                        <h4 style="font-size: 1.8em; text-align: center;">üòû PERDITA</h4>
                        <p style="text-align: center; font-size: 1.3em; margin: 20px 0;">
                            Quando i <strong>COSTI</strong> sono <strong>maggiori</strong> dei <strong>RICAVI</strong>
                        </p>
                        <div class="formula-box" style="background: #ffccbc; border-color: #ff5722;">
                            COSTI > RICAVI<br>
                            COSTI - RICAVI = PERDITA
                        </div>
                    </div>
                </div>

                <div class="esempio-box">
                    <h4>üçï Esempio Pratico: Marzo da Mario</h4>
                    <p style="font-size: 1.1em; margin: 15px 0;">Nel mese di marzo, il ristorante di Mario ha:</p>
                    
                    <div style="background: white; padding: 20px; border-radius: 10px; margin: 20px 0;">
                        <p style="color: #00b894; font-size: 1.2em; font-weight: bold;">üí∞ RICAVI: 12.000 ‚Ç¨</p>
                        <ul style="margin-left: 30px; margin-top: 10px;">
                            <li>Vendita menu alla carta: 8.000 ‚Ç¨</li>
                            <li>Vendita bevande: 2.500 ‚Ç¨</li>
                            <li>Catering per eventi: 1.500 ‚Ç¨</li>
                        </ul>
                    </div>

                    <div style="background: white; padding: 20px; border-radius: 10px; margin: 20px 0;">
                        <p style="color: #ff7675; font-size: 1.2em; font-weight: bold;">üí∏ COSTI: 8.500 ‚Ç¨</p>
                        <ul style="margin-left: 30px; margin-top: 10px;">
                            <li>Acquisto materie prime: 4.000 ‚Ç¨</li>
                            <li>Stipendi personale: 3.000 ‚Ç¨</li>
                            <li>Affitto locale: 1.000 ‚Ç¨</li>
                            <li>Bollette: 500 ‚Ç¨</li>
                        </ul>
                    </div>

                    <div style="background: #c8e6c9; padding: 25px; border-radius: 10px; text-align: center;">
                        <p style="font-size: 1.5em; font-weight: bold; color: #2d3436;">
                            UTILE = 12.000 ‚Ç¨ - 8.500 ‚Ç¨ = <span style="color: #00b894;">3.500 ‚Ç¨</span> ‚úÖ
                        </p>
                        <p style="margin-top: 15px; font-size: 1.1em;">
                            Mario ha guadagnato 3.500 ‚Ç¨ questo mese!
                        </p>
                    </div>
                </div>

                <div class="note-box">
                    <h4>üìö Differenza tra Patrimonio e Reddito</h4>
                    <ul style="margin-left: 30px; margin-top: 15px;">
                        <li><strong>PATRIMONIO:</strong> √à una "fotografia" di ci√≤ che l'impresa possiede e deve in un momento preciso</li>
                        <li><strong>REDDITO:</strong> √à il risultato delle operazioni di gestione durante un periodo (mese, anno)</li>
                        <li>Il reddito (utile o perdita) modifica il patrimonio netto!</li>
                    </ul>
                </div>

                <button class="btn-primary" onclick="showModule(4)">Avanti: Costi e Ricavi ‚ñ∂Ô∏è</button>
            </div>

            <!-- MODULO 4: COSTI E RICAVI -->
            <div class="module" id="module4">
                <h2>üí∏ Costi e Ricavi: Analisi Dettagliata</h2>

                <h3>üìâ I COSTI</h3>
                <p style="font-size: 1.2em; line-height: 1.8; margin: 20px 0;">
                    Un <span class="highlight">costo</span> √® l'onere che l'impresa sostiene per acquistare 
                    beni e servizi necessari alla sua attivit√†.
                </p>

                <div class="esempio-box">
                    <h4>üçΩÔ∏è Principali Costi nel Ristorante</h4>
                    
                    <div style="margin: 20px 0;">
                        <h5 style="color: #e74c3c; font-size: 1.2em;">1. Costi per Acquisti</h5>
                        <ul style="margin-left: 30px; margin-top: 10px;">
                            <li>ü•© Materie prime (carne, pesce, verdure)</li>
                            <li>üç∑ Bevande (vino, birra, soft drink)</li>
                            <li>ü•ñ Prodotti da forno</li>
                            <li>üßª Materiali di consumo (tovaglie, tovaglioli)</li>
                        </ul>
                    </div>

                    <div style="margin: 20px 0;">
                        <h5 style="color: #e74c3c; font-size: 1.2em;">2. Costi per Servizi</h5>
                        <ul style="margin-left: 30px; margin-top: 10px;">
                            <li>üí° Utenze (luce, gas, acqua)</li>
                            <li>üì± Telefono e internet</li>
                            <li>üßπ Servizio di pulizia</li>
                            <li>üîß Manutenzioni</li>
                            <li>üì¢ Pubblicit√†</li>
                        </ul>
                    </div>

                    <div style="margin: 20px 0;">
                        <h5 style="color: #e74c3c; font-size: 1.2em;">3. Costi per il Personale</h5>
                        <ul style="margin-left: 30px; margin-top: 10px;">
                            <li>üë®‚Äçüç≥ Stipendi chef</li>
                            <li>üëî Stipendi camerieri</li>
                            <li>üìä Contributi previdenziali</li>
                        </ul>
                    </div>

                    <div style="margin: 20px 0;">
                        <h5 style="color: #e74c3c; font-size: 1.2em;">4. Altri Costi</h5>
                        <ul style="margin-left: 30px; margin-top: 10px;">
                            <li>üè¢ Affitto del locale</li>
                            <li>üìÑ Ammortamenti (usura delle attrezzature)</li>
                            <li>üíº Consulenze (commercialista)</li>
                            <li>üìä Imposte e tasse</li>
                        </ul>
                    </div>
                </div>

                <h3 style="margin-top: 50px;">üìà I RICAVI</h3>
                <p style="font-size: 1.2em; line-height: 1.8; margin: 20px 0;">
                    Un <span class="highlight">ricavo</span> √® il provento che l'impresa ottiene dalla 
                    vendita di prodotti e servizi.
                </p>

                <div class="esempio-box">
                    <h4>üçΩÔ∏è Principali Ricavi nel Ristorante</h4>
                    
                    <div style="margin: 20px 0;">
                        <h5 style="color: #00b894; font-size: 1.2em;">1. Vendite al Ristorante</h5>
                        <ul style="margin-left: 30px; margin-top: 10px;">
                            <li>üçù Vendita di piatti (primi, secondi, contorni)</li>
                            <li>üçï Vendita di pizze</li>
                            <li>üç∞ Vendita di dolci</li>
                            <li>‚òï Vendita di caff√® e bevande calde</li>
                        </ul>
                    </div>

                    <div style="margin: 20px 0;">
                        <h5 style="color: #00b894; font-size: 1.2em;">2. Vendita Bevande</h5>
                        <ul style="margin-left: 30px; margin-top: 10px;">
                            <li>üç∑ Vini</li>
                            <li>üç∫ Birre</li>
                            <li>ü•§ Bibite</li>
                            <li>üíß Acqua</li>
                        </ul>
                    </div>

                    <div style="margin: 20px 0;">
                        <h5 style="color: #00b894; font-size: 1.2em;">3. Servizi Aggiuntivi</h5>
                        <ul style="margin-left: 30px; margin-top: 10px;">
                            <li>üéâ Catering per eventi</li>
                            <li>üöó Servizio consegne a domicilio</li>
                            <li>üëî Servizio banchetti</li>
                            <li>üç¥ Menu degustazione</li>
                        </ul>
                    </div>
                </div>

                <div class="warning-box">
                    <h4>‚ö†Ô∏è Attenzione!</h4>
                    <p style="font-size: 1.1em; margin-top: 10px;">
                        Le imprese hanno come scopo quello di ottenere un <strong>profitto</strong>, 
                        cio√® un <strong>risultato economico positivo</strong> (UTILE). 
                        Per farlo, devono cercare di <strong>massimizzare i ricavi</strong> e 
                        <strong>minimizzare i costi</strong>, mantenendo sempre alta la qualit√†!
                    </p>
                </div>

                <h3 style="margin-top: 40px;">üéØ Esercizio Interattivo</h3>
                <div class="interactive-exercise">
                    <h4 style="margin-bottom: 20px;">Classifica questi elementi come COSTI o RICAVI:</h4>
                    
                    <div id="dragItems" style="margin: 20px 0;">
                        <div class="draggable" draggable="true">Vendita pizza margherita: 8‚Ç¨</div>
                        <div class="draggable" draggable="true">Acquisto farina: 50‚Ç¨</div>
                        <div class="draggable" draggable="true">Bolletta elettricit√†: 300‚Ç¨</div>
                        <div class="draggable" draggable="true">Catering matrimonio: 2.000‚Ç¨</div>
                        <div class="draggable" draggable="true">Stipendio chef: 1.800‚Ç¨</div>
                        <div class="draggable" draggable="true">Vendita vino: 450‚Ç¨</div>
                    </div>

                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 30px;">
                        <div>
                            <h4 style="color: #ff7675;">üí∏ COSTI</h4>
                            <div class="drop-zone" id="costiZone"></div>
                        </div>
                        <div>
                            <h4 style="color: #00b894;">üí∞ RICAVI</h4>
                            <div class="drop-zone" id="ricaviZone"></div>
                        </div>
                    </div>

                    <button class="btn-success" onclick="checkDragExercise()">Verifica Risposta ‚úì</button>
                    <div id="dragFeedback" style="margin-top: 20px; font-size: 1.2em; font-weight: bold;"></div>
                </div>

                <button class="btn-primary" onclick="showModule(5)">Avanti: Esercizio Completo ‚ñ∂Ô∏è</button>
            </div>

            <!-- MODULO 5: ESERCIZIO PRATICO -->
            <div class="module" id="module5">
                <h2>üéì Esercizio Pratico Completo</h2>

                <div class="esempio-box">
                    <h4>üìã Situazione: Pizzeria "Bella Napoli" - Anno 2024</h4>
                    <p style="font-size: 1.1em; margin: 15px 0;">
                        Luca ha aperto la Pizzeria "Bella Napoli" e vuole sapere come sta andando la sua attivit√†. 
                        Aiutalo a determinare il Patrimonio Netto e il Risultato d'Esercizio!
                    </p>
                </div>

                <div class="calcolo-container">
                    <h3>üìä Dati Forniti</h3>
                    
                    <table class="tabella-patrimoniale">
                        <tr>
                            <th colspan="2" style="background: #1976d2;">ELEMENTI PATRIMONIALI</th>
                        </tr>
                        <tr class="attivita">
                            <td><strong>Forno professionale</strong></td>
                            <td>25.000 ‚Ç¨</td>
                        </tr>
                        <tr class="attivita">
                            <td><strong>Attrezzature da cucina</strong></td>
                            <td>15.000 ‚Ç¨</td>
                        </tr>
                        <tr class="attivita">
                            <td><strong>Arredamento sala</strong></td>
                            <td>10.000 ‚Ç¨</td>
                        </tr>
                        <tr class="attivita">
                            <td><strong>Scorte (farina, pomodoro, mozzarella)</strong></td>
                            <td>3.000 ‚Ç¨</td>
                        </tr>
                        <tr class="attivita">
                            <td><strong>Denaro in cassa</strong></td>
                            <td>2.500 ‚Ç¨</td>
                        </tr>
                        <tr class="attivita">
                            <td><strong>Banca c/c</strong></td>
                            <td>8.000 ‚Ç¨</td>
                        </tr>
                        <tr class="attivita">
                            <td><strong>Crediti da clienti</strong></td>
                            <td>1.500 ‚Ç¨</td>
                        </tr>
                    </table>

                    <table class="tabella-patrimoniale" style="margin-top: 30px;">
                        <tr>
                            <th colspan="2" style="background: #f57c00;">DEBITI E FONDI</th>
                        </tr>
                        <tr class="passivita">
                            <td><strong>Debiti verso fornitori</strong></td>
                            <td>8.000 ‚Ç¨</td>
                        </tr>
                        <tr class="passivita">
                            <td><strong>Mutuo bancario</strong></td>
                            <td>12.000 ‚Ç¨</td>
                        </tr>
                        <tr class="passivita">
                            <td><strong>Debiti tributari (IVA)</strong></td>
                            <td>2.000 ‚Ç¨</td>
                        </tr>
                        <tr class="passivita">
                            <td><strong>Fondo ammortamento attrezzature</strong></td>
                            <td>3.000 ‚Ç¨</td>
                        </tr>
                        <tr class="passivita">
                            <td><strong>Capitale sociale (investimento iniziale)</strong></td>
                            <td>30.000 ‚Ç¨</td>
                        </tr>
                    </table>

                    <table class="tabella-patrimoniale" style="margin-top: 30px;">
                        <tr>
                            <th colspan="2" style="background: #00b894;">COSTI</th>
                        </tr>
                        <tr>
                            <td><strong>Acquisto materie prime</strong></td>
                            <td>18.000 ‚Ç¨</td>
                        </tr>
                        <tr>
                            <td><strong>Stipendi personale</strong></td>
                            <td>24.000 ‚Ç¨</td>
                        </tr>
                        <tr>
                            <td><strong>Affitto locale</strong></td>
                            <td>12.000 ‚Ç¨</td>
                        </tr>
                        <tr>
                            <td><strong>Utenze (luce, gas, acqua)</strong></td>
                            <td>4.000 ‚Ç¨</td>
                        </tr>
                        <tr>
                            <td><strong>Ammortamento attrezzature</strong></td>
                            <td>3.000 ‚Ç¨</td>
                        </tr>
                        <tr>
                            <td><strong>Pubblicit√†</strong></td>
                            <td>2.000 ‚Ç¨</td>
                        </tr>
                    </table>

                    <table class="tabella-patrimoniale" style="margin-top: 30px;">
                        <tr>
                            <th colspan="2" style="background: #4caf50;">RICAVI</th>
                        </tr>
                        <tr>
                            <td><strong>Vendita pizze</strong></td>
                            <td>55.000 ‚Ç¨</td>
                        </tr>
                        <tr>
                            <td><strong>Vendita bevande</strong></td>
                            <td>12.000 ‚Ç¨</td>
                        </tr>
                        <tr>
                            <td><strong>Servizio catering</strong></td>
                            <td>5.000 ‚Ç¨</td>
                        </tr>
                    </table>
                </div>

                <div class="interactive-exercise">
                    <h3>‚úèÔ∏è Compila la Situazione Patrimoniale e Economica</h3>
                    
                    <div style="background: white; padding: 25px; border-radius: 10px; margin: 20px 0;">
                        <h4 style="color: #1976d2;">üìä SITUAZIONE PATRIMONIALE</h4>
                        
                        <div style="margin: 20px 0;">
                            <p><strong>TOTALE ATTIVIT√Ä:</strong></p>
                            <input type="number" id="totAttivita" placeholder="Inserisci importo"> ‚Ç¨
                        </div>

                        <div style="margin: 20px 0;">
                            <p><strong>TOTALE PASSIVIT√Ä (solo debiti):</strong></p>
                            <input type="number" id="totPassivita" placeholder="Inserisci importo"> ‚Ç¨
                        </div>

                        <div style="margin: 20px 0;">
                            <p><strong>PATRIMONIO NETTO (prima dell'utile):</strong></p>
                            <input type="number" id="patrimonioNetto" placeholder="Inserisci importo"> ‚Ç¨
                        </div>
                    </div>

                    <div style="background: white; padding: 25px; border-radius: 10px; margin: 20px 0;">
                        <h4 style="color: #4caf50;">üìà SITUAZIONE ECONOMICA</h4>
                        
                        <div style="margin: 20px 0;">
                            <p><strong>TOTALE COSTI:</strong></p>
                            <input type="number" id="totCosti" placeholder="Inserisci importo"> ‚Ç¨
                        </div>

                        <div style="margin: 20px 0;">
                            <p><strong>TOTALE RICAVI:</strong></p>
                            <input type="number" id="totRicavi" placeholder="Inserisci importo"> ‚Ç¨
                        </div>

                        <div style="margin: 20px 0;">
                            <p><strong>UTILE/PERDITA D'ESERCIZIO:</strong></p>
                            <input type="number" id="risultato" placeholder="Inserisci importo"> ‚Ç¨
                        </div>
                    </div>

                    <button class="btn-success" onclick="checkExercise()">Verifica le Risposte ‚úì</button>
                    <div id="exerciseFeedback" style="margin-top: 20px;"></div>
                </div>

                <button class="btn-primary" onclick="showModule(6)">Vai al Riepilogo Finale ‚ñ∂Ô∏è</button>
            </div>

            <!-- MODULO 6: RIEPILOGO -->
            <div class="module" id="module6">
                <h2>üéâ Riepilogo e Conclusione</h2>

                <div class="summary-box">
                    <h3>‚úÖ Concetti Chiave Appresi</h3>
                    <ul>
                        <li><strong>PATRIMONIO:</strong> L'insieme dei beni economici posseduti dall'impresa in un dato momento</li>
                        <li><strong>ATTIVIT√Ä:</strong> Tutto ci√≤ che l'impresa possiede (immobilizzazioni + circolante)</li>
                        <li><strong>PASSIVIT√Ä:</strong> Tutto ci√≤ che l'impresa deve (debiti + patrimonio netto)</li>
                        <li><strong>PATRIMONIO NETTO:</strong> La ricchezza effettiva dell'imprenditore</li>
                        <li><strong>REDDITO:</strong> Il risultato economico della gestione in un periodo</li>
                        <li><strong>COSTI:</strong> Gli oneri sostenuti per l'attivit√†</li>
                        <li><strong>RICAVI:</strong> I proventi ottenuti dalle vendite</li>
                        <li><strong>UTILE:</strong> Quando Ricavi > Costi</li>
                        <li><strong>PERDITA:</strong> Quando Costi > Ricavi</li>
                    </ul>
                </div>

                <div class="formula-box">
                    üìê FORMULE FONDAMENTALI
                </div>

                <div style="background: #f8f9fa; padding: 25px; border-radius: 15px; margin: 30px 0;">
                    <h4 style="color: #667eea; margin-bottom: 20px;">Situazione Patrimoniale:</h4>
                    <p style="font-size: 1.3em; text-align: center; font-weight: bold; margin: 15px 0;">
                        ATTIVIT√Ä = PASSIVIT√Ä + PATRIMONIO NETTO
                    </p>
                    <p style="font-size: 1.3em; text-align: center; font-weight: bold; margin: 15px 0;">
                        PATRIMONIO NETTO = ATTIVIT√Ä - PASSIVIT√Ä
                    </p>
                </div>

                <div style="background: #f8f9fa; padding: 25px; border-radius: 15px; margin: 30px 0;">
                    <h4 style="color: #4caf50; margin-bottom: 20px;">Situazione Economica:</h4>
                    <p style="font-size: 1.3em; text-align: center; font-weight: bold; margin: 15px 0;">
                        REDDITO = RICAVI - COSTI
                    </p>
                    <p style="font-size: 1.2em; text-align: center; margin: 15px 0;">
                        Se RICAVI > COSTI ‚Üí <span style="color: #00b894;">UTILE</span>
                    </p>
                    <p style="font-size: 1.2em; text-align: center; margin: 15px 0;">
                        Se COSTI > RICAVI ‚Üí <span style="color: #d63031;">PERDITA</span>
                    </p>
                </div>

                <div class="esempio-box">
                    <h4>üéì Competenze Acquisite per il Settore Enogastronomico</h4>
                    <p style="margin: 15px 0;">Ora sei in grado di:</p>
                    <ul style="margin-left: 30px;">
                        <li>‚úÖ Analizzare la situazione patrimoniale di un ristorante/hotel</li>
                        <li>‚úÖ Distinguere tra investimenti a lungo termine e a breve termine</li>
                        <li>‚úÖ Calcolare il patrimonio netto di un'impresa ricettiva</li>
                        <li>‚úÖ Determinare se un ristorante sta guadagnando o perdendo</li>
                        <li>‚úÖ Classificare correttamente costi e ricavi</li>
                        <li>‚úÖ Comprendere l'importanza della gestione economica</li>
                    </ul>
                </div>

                <div class="note-box">
                    <h4>üí° Suggerimenti Pratici per il Futuro</h4>
                    <ul style="margin-left: 30px; margin-top: 15px;">
                        <li>Monitora regolarmente costi e ricavi per capire se la tua attivit√† √® profittevole</li>
                        <li>Cerca di ridurre i costi senza compromettere la qualit√†</li>
                        <li>Investi in attrezzature che aumentino l'efficienza</li>
                        <li>Mantieni sempre un buon equilibrio tra attivit√† e passivit√†</li>
                        <li>Conserva una parte degli utili come riserve per il futuro</li>
                    </ul>
                </div>

                <div class="quiz-container">
                    <h3>üèÜ Quiz Finale di Verifica</h3>
                    
                    <div style="margin: 30px 0;">
                        <div class="quiz-question">1. Il capitale sociale fa parte di:</div>
                        <div class="quiz-option" onclick="checkFinalAnswer(this, false, 1)">A) Attivit√†</div>
                        <div class="quiz-option" onclick="checkFinalAnswer(this, true, 1)">B) Patrimonio Netto</div>
                        <div class="quiz-option" onclick="checkFinalAnswer(this, false, 1)">C) Debiti</div>
                        <div class="feedback" id="finalFeedback1"></div>
                    </div>

                    <div style="margin: 30px 0;">
                        <div class="quiz-question">2. Le rimanenze di magazzino sono:</div>
                        <div class="quiz-option" onclick="checkFinalAnswer(this, false, 2)">A) Attivo immobilizzato</div>
                        <div class="quiz-option" onclick="checkFinalAnswer(this, true, 2)">B) Attivo circolante</div>
                        <div class="quiz-option" onclick="checkFinalAnswer(this, false, 2)">C) Passivit√†</div>
                        <div class="feedback" id="finalFeedback2"></div>
                    </div>

                    <div style="margin: 30px 0;">
                        <div class="quiz-question">3. Se i costi sono 50.000‚Ç¨ e i ricavi 45.000‚Ç¨:</div>
                        <div class="quiz-option" onclick="checkFinalAnswer(this, false, 3)">A) Utile di 5.000‚Ç¨</div>
                        <div class="quiz-option" onclick="checkFinalAnswer(this, true, 3)">B) Perdita di 5.000‚Ç¨</div>
                        <div class="quiz-option" onclick="checkFinalAnswer(this, false, 3)">C) Pareggio</div>
                        <div class="feedback" id="finalFeedback3"></div>
                    </div>
                </div>

                <div style="text-align: center; margin: 50px 0;">
                    <h2 style="color: #667eea; margin-bottom: 20px;">üéä Complimenti!</h2>
                    <p style="font-size: 1.3em; line-height: 1.8;">
                        Hai completato la lezione su <strong>Patrimonio e Reddito</strong>!<br>
                        Ora hai le competenze base per analizzare la situazione economica e patrimoniale<br>
                        di un'impresa nel settore dell'enogastronomia.
                    </p>
                    
                    <button class="btn-success" onclick="resetLesson()" style="margin-top: 30px; font-size: 1.2em; padding: 20px 40px;">
                        üîÑ Ricomincia la Lezione
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        let startTime = Date.now();
        let currentModule = 0;
        const totalModules = 7;

        // Timer
        setInterval(() => {
            const elapsed = Math.floor((Date.now() - startTime) / 1000);
            const minutes = Math.floor(elapsed / 60);
            const seconds = elapsed % 60;
            document.getElementById('timer').textContent = 
                `‚è±Ô∏è Tempo: ${minutes}:${seconds.toString().padStart(2, '0')}`;
        }, 1000);

        // Navigation
        function showModule(index) {
            document.querySelectorAll('.module').forEach(m => m.classList.remove('active'));
            document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
            
            document.getElementById('module' + index).classList.add('active');
            document.querySelectorAll('.nav-btn')[index].classList.add('active');
            
            currentModule = index;
            updateProgress();
            window.scrollTo(0, 0);
        }

        function updateProgress() {
            const progress = Math.round((currentModule / (totalModules - 1)) * 100);
            document.getElementById('progress').style.width = progress + '%';
            document.getElementById('progress').textContent = progress + '%';
        }

        // Quiz functions
        function checkAnswer(element, isCorrect) {
            const options = element.parentElement.querySelectorAll('.quiz-option');
            options.forEach(opt => {
                opt.style.pointerEvents = 'none';
                if (opt === element) {
                    opt.classList.add(isCorrect ? 'correct' : 'wrong');
                }
            });

            const feedback = document.getElementById('feedback1');
            if (isCorrect) {
                feedback.className = 'feedback show correct';
                feedback.textContent = '‚úÖ Corretto! Il forno professionale √® un bene duraturo, quindi un attivo immobilizzato.';
            } else {
                feedback.className = 'feedback show wrong';
                feedback.textContent = '‚ùå Non corretto. Il forno √® un bene che rimane a lungo in azienda: attivo immobilizzato!';
            }
        }

        function checkFinalAnswer(element, isCorrect, questionNum) {
            const options = element.parentElement.querySelectorAll('.quiz-option');
            options.forEach(opt => {
                opt.style.pointerEvents = 'none';
                if (opt === element) {
                    opt.classList.add(isCorrect ? 'correct' : 'wrong');
                }
            });

            const feedback = document.getElementById('finalFeedback' + questionNum);
            feedback.className = 'feedback show ' + (isCorrect ? 'correct' : 'wrong');
            
            const messages = {
                1: {
                    correct: '‚úÖ Esatto! Il capitale sociale √® la parte di patrimonio netto investita dai soci.',
                    wrong: '‚ùå Il capitale sociale fa parte del Patrimonio Netto, non delle attivit√† o dei debiti!'
                },
                2: {
                    correct: '‚úÖ Perfetto! Le rimanenze sono beni destinati a circolare rapidamente.',
                    wrong: '‚ùå Le rimanenze di magazzino sono attivo circolante, non immobilizzato!'
                },
                3: {
                    correct: '‚úÖ Corretto! 50.000 - 45.000 = 5.000‚Ç¨ di perdita (i costi superano i ricavi).',
                    wrong: '‚ùå Attento: se i COSTI (50.000) sono maggiori dei RICAVI (45.000), c\'√® una PERDITA di 5.000‚Ç¨!'
                }
            };

            feedback.textContent = isCorrect ? messages[questionNum].correct : messages[questionNum].wrong;
        }

        // Drag and drop
        let draggedElement = null;

        document.addEventListener('DOMContentLoaded', () => {
            const draggables = document.querySelectorAll('.draggable');
            const dropZones = document.querySelectorAll('.drop-zone');

            draggables.forEach(draggable => {
                draggable.addEventListener('dragstart', (e) => {
                    draggedElement = e.target;
                    e.target.style.opacity = '0.5';
                });

                draggable.addEventListener('dragend', (e) => {
                    e.target.style.opacity = '1';
                });
            });

            dropZones.forEach(zone => {
                zone.addEventListener('dragover', (e) => {
                    e.preventDefault();
                    zone.classList.add('drag-over');
                });

                zone.addEventListener('dragleave', () => {
                    zone.classList.remove('drag-over');
                });

                zone.addEventListener('drop', (e) => {
                    e.preventDefault();
                    zone.classList.remove('drag-over');
                    if (draggedElement) {
                        zone.appendChild(draggedElement);
                    }
                });
            });
        });

        function checkDragExercise() {
            const costiZone = document.getElementById('costiZone');
            const ricaviZone = document.getElementById('ricaviZone');
            const feedback = document.getElementById('dragFeedback');

            const costiItems = Array.from(costiZone.children).map(el => el.textContent);
            const ricaviItems = Array.from(ricaviZone.children).map(el => el.textContent);

            const correctCosti = ['Acquisto farina: 50‚Ç¨', 'Bolletta elettricit√†: 300‚Ç¨', 'Stipendio chef: 1.800‚Ç¨'];
            const correctRicavi = ['Vendita pizza margherita: 8‚Ç¨', 'Catering matrimonio: 2.000‚Ç¨', 'Vendita vino: 450‚Ç¨'];

            const costiCorrect = correctCosti.every(item => costiItems.includes(item)) && costiItems.length === 3;
            const ricaviCorrect = correctRicavi.every(item => ricaviItems.includes(item)) && ricaviItems.length === 3;

            if (costiCorrect && ricaviCorrect) {
                feedback.style.color = '#00b894';
                feedback.textContent = 'üéâ Perfetto! Hai classificato correttamente tutti gli elementi!';
            } else {
                feedback.style.color = '#d63031';
                feedback.textContent = '‚ùå Ricontrolla: i costi sono oneri sostenuti, i ricavi sono proventi ottenuti!';
            }
        }

        // Exercise checking
        function checkExercise() {
            const totAttivita = parseFloat(document.getElementById('totAttivita').value) || 0;
            const totPassivita = parseFloat(document.getElementById('totPassivita').value) || 0;
            const patrimonioNetto = parseFloat(document.getElementById('patrimonioNetto').value) || 0;
            const totCosti = parseFloat(document.getElementById('totCosti').value) || 0;
            const totRicavi = parseFloat(document.getElementById('totRicavi').value) || 0;
            const risultato = parseFloat(document.getElementById('risultato').value) || 0;

            // Correct answers
            const correctAttivita = 65000; // 25000+15000+10000+3000+2500+8000+1500
            const correctPassivita = 25000; // 8000+12000+2000+3000
            const correctPatrimonio = 30000;
            const correctCosti = 63000; // 18000+24000+12000+4000+3000+2000
            const correctRicavi = 72000; // 55000+12000+5000
            const correctRisultato = 9000; // 72000-63000

            const feedback = document.getElementById('exerciseFeedback');
            let message = '';
            let allCorrect = true;

            if (totAttivita !== correctAttivita) {
                message += `‚ùå Totale Attivit√† errato. Il totale corretto √® ${correctAttivita}‚Ç¨<br>`;
                allCorrect = false;
            } else {
                message += `‚úÖ Totale Attivit√† corretto!<br>`;
            }

            if (totPassivita !== correctPassivita) {
                message += `‚ùå Totale Passivit√† errato. Il totale corretto √® ${correctPassivita}‚Ç¨<br>`;
                allCorrect = false;
            } else {
                message += `‚úÖ Totale Passivit√† corretto!<br>`;
            }

            if (patrimonioNetto !== correctPatrimonio) {
                message += `‚ùå Patrimonio Netto errato. Il capitale sociale √® ${correctPatrimonio}‚Ç¨<br>`;
                allCorrect = false;
            } else {
                message += `‚úÖ Patrimonio Netto corretto!<br>`;
            }

            if (totCosti !== correctCosti) {
                message += `‚ùå Totale Costi errato. Il totale corretto √® ${correctCosti}‚Ç¨<br>`;
                allCorrect = false;
            } else {
                message += `‚úÖ Totale Costi corretto!<br>`;
            }

            if (totRicavi !== correctRicavi) {
                message += `‚ùå Totale Ricavi errato. Il totale corretto √® ${correctRicavi}‚Ç¨<br>`;
                allCorrect = false;
            } else {
                message += `‚úÖ Totale Ricavi corretto!<br>`;
            }

            if (risultato !== correctRisultato) {
                message += `‚ùå Utile errato. L'utile corretto √® ${correctRisultato}‚Ç¨ (Ricavi - Costi)<br>`;
                allCorrect = false;
            } else {
                message += `‚úÖ Utile d'esercizio corretto!<br>`;
            }

            if (allCorrect) {
                message = 'üéâüéâüéâ <strong>PERFETTO! HAI RISOLTO CORRETTAMENTE L\'INTERO ESERCIZIO!</strong><br><br>' + message;
                feedback.style.background = '#d4edda';
                feedback.style.border = '2px solid #00b894';
            } else {
                message = '<strong>Ricontrolla i calcoli:</strong><br><br>' + message;
                feedback.style.background = '#fff3cd';
                feedback.style.border = '2px solid #ffc107';
            }

            feedback.innerHTML = message;
            feedback.style.padding = '25px';
            feedback.style.borderRadius = '10px';
            feedback.style.marginTop = '20px';
            feedback.style.fontSize = '1.1em';
            feedback.style.lineHeight = '1.8';
        }

        function resetLesson() {
            startTime = Date.now();
            showModule(0);
            
            // Reset all inputs
            document.querySelectorAll('input[type="number"]').forEach(input => input.value = '');
            
            // Reset quiz options
            document.querySelectorAll('.quiz-option').forEach(opt => {
                opt.classList.remove('correct', 'wrong');
                opt.style.pointerEvents = 'auto';
            });
            
            // Reset feedbacks
            document.querySelectorAll('.feedback').forEach(fb => {
                fb.className = 'feedback';
                fb.textContent = '';
            });
            
            // Reset drag items
            const dragItems = document.getElementById('dragItems');
            if (dragItems) {
                const costiZone = document.getElementById('costiZone');
                const ricaviZone = document.getElementById('ricaviZone');
                
                Array.from(costiZone.children).forEach(child => dragItems.appendChild(child));
                Array.from(ricaviZone.children).forEach(child => dragItems.appendChild(child));
            }
            
            alert('üîÑ Lezione riavviata! Buon lavoro!');
        }

        // Initialize
        updateProgress();
    </script>
</body>
</html>